<div class="form-holder _newForm">
    <form method="post" id="createPaymentForm">
        <h2 class="_dialogMainTitle"><%=title || '创建付款'%></h2>
        <div class="_formWrap _enlargedItemMargin">
            <div class="_formBlock _equal">
                <div class="_animateInputBox">
                    <span class="_staticLabel">供应商</span>
                    <%if(invoice && invoice.supplier && invoice.supplier._id){%>
                    <span id="supplierDd"
                          class="_staticInfo"
                          data-id="<%=invoice.supplier._id%>">
                            <%=invoice.supplier.name.first + ' ' + invoice.supplier.name.last%></span>
                    <%} else {%>
                    <span id="supplierDd" class="_staticInfo">Nan</span>
                    <%}%>
                </div>
                <%if (prepayment) {%>
                <div id="prepaidAmountDd" class="_animateInputBox <%=currencyClass(currency._id)%>">
                    <input type="text"
                           name="paidAmount"
                           class="_animate"
                           id="prepaidAmount"
                           maxlength="10"
                           value="<%=invoice.paymentInfo ? invoice.paymentInfo.total - paymentsSum : 0%>">
                    <label class="_animate" for="prepaidAmount">预付款金额</label>
                </div>
                <%} else {%>
                <div class="_animateInputBox <%=currencyClass(currency._id)%>" id="paidAmountDd" >
                    <input type="text"
                           name="paidAmount"
                           class="_animate"
                           id="paidAmount"
                           maxlength="10"
                           value="<%=invoice.paymentInfo ? invoice.paymentInfo.balance : 0%>"
                           required/>
                    <label class="_animate" for="paidAmount">付款金额</label>
                </div>
                <%}%>
                <div class="_animateSelectBox _additionalInputWrap">
                    <span class="_selectTitle">银行费用</span>
                    <div id="bankExpensesAccount"
                         class="_newSelectListWrap _bankExpensesAccount">
                        <a id="bankExpensesAccountDd"
                           class="current-selected"
                           href="javascript:;">选择</a>
                    </div>
                    <div id="bankExpensesDd"
                         class="_additionalInput <%=currencyClass(currency._id)%>">
                        <input type="text"
                               id="bankExpenses"
                               name="paidAmount"
                               placeholder="Amount"
                               maxlength="10"
                               required
                               value=""/>
                    </div>
                </div>
                <div id="overPayment" class="hidden _additionalInputWrap">
                    <div class="_animateSelectBox" id="overPaymentAccount">
                        <span class="_selectTitle">溢缴款</span>
                        <div class="_newSelectListWrap">
                            <a id="overPaymentAccountDd"
                               class="current-selected"
                               href="javascript:;">选择</a>
                        </div>
                    </div>
                    <div id="overPaymentDiffDd"
                         class="_additionalInputWrap <%=currencyClass(currency._id)%>">
                        <input type="text"
                               name="paidAmount"
                               id="overPaymentDiff"
                               class="_animate"
                               maxlength="10"
                               value=""
                               required
                               readonly/>
                    </div>
                </div>
            </div>
            <div class="_formBlock _equal">
                <div class="_animateInputBox">
                    <span class="_staticLabel">日期</span>
                    <input id="paymentDate"
                           class="_animate extrainfo"
                           type="text"
                           placeholder="Select Payment Date"
                           name="paymentDate"
                           required>
                </div>
                <div class="_animateInputBox">
                    <span class="_staticLabel">发票文件</span>
                    <span class="_staticInfo"
                          id="paymentRef"
                          data-id="<%=invoice._id%>"><%=invoice.name%></span>
                </div>
                <div class="_animateSelectBox">
                    <span class="_selectTitle">货币</span>
                    <div class="_newSelectListWrap">
                        <a id="currencyDd"
                           class="current-selected"
                           data-id="<%= currency && currency._id ? currency._id : null%>"
                           href="javascript:;">
                            <%= currency ? currency.name : ''%>
                        </a>
                    </div>
                </div>
                <div class="_animateSelectBox">
                    <span class="_selectTitle">银行账户</span>
                    <div class="_newSelectListWrap">
                        <a id="paymentMethod"
                           class="current-selected"
                           href="javascript:;">选择</a>
                    </div>
                </div>
                <div class="_animateInputBox" id='journalDiv'>
                    <span class="_staticLabel">科目</span>
                    <div class="_staticInfo" id="account"></div>
                </div>
            </div>
            <div id="differenceAmountContainer" class="half-block left hidden">
                <dt><label>差额</label></dt>
                <dd><span id="differenceAmount"></span></dd>
            </div>
        </div>
    </form>
</div>
